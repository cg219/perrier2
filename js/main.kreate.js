(function(){function n(e,t){$.ajax({url:e,type:"POST",data:{skipFirstFeatured:!0},success:function(e){var n=$("#main .article",e),r=$(".nextPostLink a",e).last().attr("href")||!1;t(n,r)},error:function(e){console.log("error")}})}function r(){var e="";$("#hotspot-navbar .dropdown-menu li").each(function(t){var n=$(this);n.hasClass("selected")&&(e+=n.text()+",")});return e.substr(0,e.length-1)}function i(e){var t="";e.find("li").each(function(e){var n=$(this);n.hasClass("selected")&&(t=t==""?n.text():"MULTIPLE")});return t==""?"ALL":t}function s(e){e.find("li").each(function(e){var t=$(this);t.hasClass("selected")&&t.text()!="ALL"&&t.toggleClass("selected")})}var e=!1;$("#hotspot-navbar .dropdown-menu li").on("click",function(e){e.preventDefault();e.stopPropagation();var t=$(this);t.toggleClass("selected");var n=i(t.parent());$("#hotspot-toggle").text(n);n=="ALL"&&s(t.parent())});$(".goButton").on("click",function(e){e.preventDefault();var t=r(),n=$(this).parent().find("form");n.find("input").val(t);n.submit()});var t=$(".nextPostLink a").last().attr("href");$(document).on("scroll.main",function(r){if(e)return!1;if($(window).scrollTop()+$(window).height()==$(document).height()){e=!0;var i=$("#main");if(i.data("next-page")==t){$(document).off(".main");e=!1;return!1}n(i.data("next-page")||t,function(t,n){e=!1;$("#main").append(t);n?$("#main").data("next-page",n):$(document).off(".main")})}})})();