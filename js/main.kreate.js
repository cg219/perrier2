(function(){function s(e){n.fadeOut(function(){e=e=="up"?1:0;var r,i=parseInt(t.attr("data-index")),s=parseInt(t.attr("data-amount")),o=n.width();switch(e){case 1:r=i==s-1?0:++i;break;case 0:r=i==0?s-1:--i}t.attr("data-index",r);n.css({marginLeft:r==0?0:(o-o*(r/s))*-1});n.fadeIn()})}function o(e,t,n){t="#"+t;$.ajax({url:e,type:"POST",data:{skipFirstFeatured:!0},success:function(e){var r=$(t+" .article",e),i=$(".nextPostLink a",e).last().attr("href")||!1;n(r,i)},error:function(e){console.log("error")}})}function u(){var e="";$("#hotspot-navbar .dropdown-menu li").each(function(t){var n=$(this);n.hasClass("selected")&&(e+=n.text()+",")});return e.substr(0,e.length-1)}function a(e){var t="";e.find("li").each(function(e){var n=$(this);n.hasClass("selected")&&(t=t==""?n.text():"MULTIPLE")});return t==""?"ALL":t}function f(e){e.find("li").each(function(e){var t=$(this);t.hasClass("selected")&&t.text()!="ALL"&&t.toggleClass("selected")})}var e=!1,t=$(".slider"),n=$(".slider_images"),r=$(".slide_image_holder");if(t){n.width(r.width()*t.attr("data-amount"));r.each(function(e){var t=$(this).find("img");t.css({marginLeft:t.width()*.5*-1,marginTop:t.height()*.5*-1})})}$("#hotspot-navbar .dropdown-menu li").on("click",function(e){e.preventDefault();e.stopPropagation();var t=$(this);t.toggleClass("selected");var n=a(t.parent());$("#hotspot-toggle").text(n);n=="ALL"&&f(t.parent())});$(".goButton").on("click",function(e){e.preventDefault();var t=u(),n=$(this).parent().find("form");n.find("input").val(t);n.submit()});var i=$(".nextPostLink a").last().attr("href");$(document).on("scroll.main",function(t){if(e)return!1;if($(window).scrollTop()+$(window).height()==$(document).height()){e=!0;var n=$("#singlemain, #main").last();console.log(n.data("next-page"));console.log(i);if(n.data("next-page")==i){$(document).off(".main");e=!1;return!1}o(n.data("next-page")||i,"main",function(t,r){e=!1;n.append(t);r?n.data("next-page",r):$(document).off(".main")})}});$("button.next").on("click",function(){s("up")});$("button.prev").on("click",function(){s("back")})})();